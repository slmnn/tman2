
<h3>
    Users ({{items.length}})

    <div class="col-xs-6 pull-right list-search">
        <a
            data-ui-sref="admin.user.add"
            data-tooltip="Add new user"
        ><i class="fa fa-plus-circle"></i></a>

        <list-search
            data-filters="filters"
            data-options="itemsPerPageOptions"
            data-items="itemsPerPage"
        ></list-search>

        <pagination class="pagination-sm"
            data-total-items="itemCount"
            data-ng-model="currentPage"
            data-items-per-page="itemsPerPage"
            data-max-size="10"
            data-boundary-links="true"
            data-rotate="false"
        ></pagination>
    </div>
</h3>

<table class="table">
    <thead class="noSelect">
        <tr>
            <th class="text-nowrap {{item.class}}"
                data-ng-repeat="item in titleItems"
            >
                <a
                    data-ng-show="item.column"
                    data-ng-click="changeSort(item)"
                    data-ng-bind-html="item.title"
                ></a>
                    <span
                        data-ng-show="!item.column"
                        data-ng-bind-html="item.title"
                    ></span>

                <i class="fa"
                    data-ng-show="sort.column == item.column"
                    data-ng-class="{'fa-angle-down': !sort.direction, 'fa-angle-up': sort.direction}"
                ></i>
            </th>
        </tr>
    </thead>
    <tbody>
        <tr data-ng-repeat="item in items">
            <td class="col-xs-2">
                {{item.firstName}}
            </td>
            <td class="col-xs-2">
                {{item.lastName}}
            </td>
            <td class="col-xs-1">
                <span style="{{item.archived ? 'text-decoration: line-through':''}}">{{item.username}}</span>
            </td>
            <td class="col-xs-2">
                {{item.email}}
            </td>
            <td class="col-xs-1">
                {{item.admin ? 'admin':'regular user'}}
                <span data-ng-if="item.archived">(archived)</span>
            </td>
            <td class="col-xs-3">
                {{item.createdAt | date : 'dd.MM.yyyy'}},
                <span data-am-time-ago="item.createdAt"></span>
            </td>
            <td class="col-xs-1">
                <label class="whitespace-label">
                    <input type="checkbox" 
                        class="big-checkbox"
                        id="checkbox_{{item.id}}"
                        data-ng-model="item.checked" 
                        data-ng-change="userChecked(item)">
                    </input>
                </label>
            </td>
        </tr>

        <tr data-ng-if="items.length === 0">
            <td colspan="100%" class="text-center text-muted">
                <em>no data founded...</em>
            </td>
        </tr>
    </tbody>
</table>

<pagination class="pagination-sm pull-right"
    data-total-items="itemCount"
    data-ng-model="currentPage"
    data-items-per-page="itemsPerPage"
    data-max-size="10"
    data-boundary-links="true"
    data-rotate="false"
></pagination>

<div class="clearfix"></div>


<div class="row top-buffer">
    <div class="col-sm-12">
        <div class="panel panel-primary" data-ng-show="filteredItems.length > 0">
          <div class="panel-heading">
            Operations for {{filteredItems.length}} selected users
            <button 
                class="btn btn-xs btn-primary pull-right" 
                data-ng-click="clearSelected(items)"
            >
                Clear selection
            </button>
          </div>
          <div class="panel-body">    
            <ul class="list-inline">
                <li class="vertical-list" data-ng-repeat="t in filteredItems = (items | filter : onlyCheckedItems)">
                    
                    <h3>{{t.username || t.id}}</h3>
                    
                </li>
            </ul>
            <hr>
            <form>
                <div class="row top-buffer">
                    <div class="col-md-6 col-md-offset-1">
                        <button 
                            class="btn btn-primary btn-sm" 
                            data-ng-click="archiveUsers(filteredItems)"
                        >
                            Toggle user(s) archived
                        </button>
                    </div>
                    <div class="col-md-4 bg-info">
                        <p>
                            A user can be archived, which makes logging in not possible for the user.
                        </p>
                    </div>
                </div>
            </form>
          </div>
        </div>
  </div>
</div>
